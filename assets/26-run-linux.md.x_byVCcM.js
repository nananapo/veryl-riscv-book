import{_ as e,c as i,o as n,ah as r}from"./chunks/framework.HhScKIQu.js";const u=JSON.parse('{"title":"Linuxを動かす (シミュレーション)","description":"","frontmatter":{},"headers":[],"relativePath":"26-run-linux.md","filePath":"26-run-linux.md"}'),l={name:"26-run-linux.md"};function t(o,a,p,s,d,S){return n(),i("div",null,[...a[0]||(a[0]=[r('<h1 id="linuxを動かす-シミュレーション" tabindex="-1">Linuxを動かす (シミュレーション) <a class="header-anchor" href="#linuxを動かす-シミュレーション" aria-label="Permalink to “Linuxを動かす (シミュレーション)”">​</a></h1><p>本章ではLinuxをCPUで動かします。</p><p>執筆中！！！（概要だけ書いてます）</p><h2 id="risc-vとos" tabindex="-1">RISC-VとOS <a class="header-anchor" href="#risc-vとos" aria-label="Permalink to “RISC-VとOS”">​</a></h2><p>RISC-Vに対応しているOSとして、Linuxや学習向けの小さなOSであるxv6が挙げられる。 本章ではLinuxをCPUで動かす。 Linuxを起動するには、次の拡張が必要である。 また、OSのようなソフトウェアを動かすことができる標準的なRISC-Vの拡張のセットはRISC-V profilesとして管理されている。(例えばRVA23)</p><h3 id="osが起動する手順を確認する" tabindex="-1">OSが起動する手順を確認する <a class="header-anchor" href="#osが起動する手順を確認する" aria-label="Permalink to “OSが起動する手順を確認する”">​</a></h3><p>ROMに格納されたローダがプログラムを展開、最低限の準備をする。 展開されたプログラムがOSを起動する準備をし、OSのエントリーポイントにジャンプ。 OSが起動する。</p><p>図</p><p>CPUはM-modeで起動し、一般的なOSはS-modeで動作します。 M-modeとS-modeの間の操作を抽象化するインターフェースとしてSBI(Supervisor Binary Interface)が定義されています。 SBIの実装としてOpenSBIがあります。</p><h3 id="デバイスツリー" tabindex="-1">デバイスツリー <a class="header-anchor" href="#デバイスツリー" aria-label="Permalink to “デバイスツリー”">​</a></h3><p>どのCPUでも動く汎用なOSを起動するとき、今使っているCPUの構成が分からないと困ります。 CPUがどのようなデバイスと接続されていて、どのようなメモリマップかなどを記述する方式に、DTS(Device Tree Source)があります。 DTSは次のように記述されます。</p><p>DTSの例</p><p>それぞれのフィールドの簡単な説明</p><p>作成しているCPU向けのDTSを記述します。</p><p>ちょっとした説明</p><p>DTSはデバイスツリーコンパイラによってバイナリ形式(dtb)にコンパイルすることができます。 dtbを読み込んでパースして、そのデバイスに合わせた処理を行うことで、メモリマップや構成をソフトウェアにハードコードする必要が無くなり、CPUの構成が変わってもソフトウェアに変更が必要なくなります。</p><h2 id="linuxのビルド" tabindex="-1">Linuxのビルド <a class="header-anchor" href="#linuxのビルド" aria-label="Permalink to “Linuxのビルド”">​</a></h2><p>buildroot OpenSBI ぬん！</p><h2 id="linuxの実行" tabindex="-1">Linuxの実行 <a class="header-anchor" href="#linuxの実行" aria-label="Permalink to “Linuxの実行”">​</a></h2><p>わお！</p>',20)])])}const x=e(l,[["render",t]]);export{u as __pageData,x as default};
